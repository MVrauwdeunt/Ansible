---

# - name: add nginx apt repository
#   apt_repository:
#     repo: 'deb http://nginx.org/packages/mainline/ubuntu/ xenial nginx'
#     state: present
#     filename: just
#     update_cache: yes
- name: wget prebuilt-mpr
  command: "wget -qO - 'https://proget.makedeb.org/debian-feeds/prebuilt-mpr.pub' | gpg --dearmor | sudo tee /usr/share/keyrings/prebuilt-mpr-archive-keyring.gpg 1> /dev/null"
- name: echo prebuilt keyring
  command: "echo "deb [arch=amd64 signed-by=/usr/share/keyrings/prebuilt-mpr-archive-keyring.gpg] https://proget.makedeb.org prebuilt-mpr $(lsb_release -cs)" | sudo tee /etc/apt/sources.list.d/prebuilt-mpr.list"
- name: update apt
  command: "apt update"
  become: yes
- name: install packages
  package:
    name: "just"

- name: generate justfile file from template
  tags: justfile
  template:
    src: "templates/justfile.j2"
    dest: "/home/{{ user }}/.justfile"
    owner: "{{ user }}"
    group: "{{ user }}"
    mode: 0644